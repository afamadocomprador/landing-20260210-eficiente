"use client";

import React, { useState } from 'react';
import { useRouter } from 'next/navigation';
import { motion } from 'framer-motion';

// --- CARTOGRAFÍA VECTORIAL DE ALTA PRECISIÓN ---
// Paths SVG refinados para encajar perfectamente con contornos reales.
// ViewBox optimizado: 0 0 950 650

const MAINLAND_REGIONS = [
  {
    id: "galicia",
    name: "Galicia",
    d: "M163.6,56.8l-8.4,2.5l-3.3,4.6l-5.4,0.4l-1.3,4.6l-2.9,2.1l-6.7,2.1l-2.5,5l1.7,3.3l-2.9,7.5l2.5,5.4l1.3,7.9l-1.7,2.9l-4.2-0.8l-1.3,2.5l2.1,3.8l-2.1,2.9l-4.2,0.8l-0.8,4.2l-2.9,2.5l0.8,5.9l1.7,1.7l5.9-0.4l4.2,2.5l5.9-0.8l4.2,2.1l3.3,4.6l2.1-0.4l4.6,2.1l2.5-0.8l2.9-4.2l3.8-0.8l2.5,1.7l3.8-1.3l2.9,1.7l2.5-2.1l-0.4-3.8l-4.6-2.1l-0.8-4.2l-3.3-2.1l-0.4-3.3l3.8-2.9l2.1,1.3l2.9-2.9l4.2,0.8l1.3-2.1l0.8-3.8l2.1-1.3l-0.8-4.2l1.7-2.1l-0.8-3.8l-4.6-0.8l-0.8-3.3l2.5-2.5l-2.1-4.2l-3.8-2.1l-3.3-0.4l-3.8,2.1l-2.1-2.9l-3.3,0.4l-1.7-2.9l-5.4-0.4L163.6,56.8z"
  },
  {
    id: "asturias",
    name: "Principado de Asturias",
    d: "M252.1,53.9l-5,0.4l-2.9-2.9l-6.3,1.3l-3.3-0.8l-3.3,0.8l-3.8-0.8l-3.3,1.7l-4.6-2.1l-4.2,2.5l-4.6-1.3l-1.3,2.5l-3.8,0.8l-1.7,2.9l-4.6,2.1l-3.3-2.1l-2.1,2.9l-1.7-2.1l-3.8,2.5l-2.5-2.9l-4.2,0.4l-2.1-2.5l0.8-3.3l4.6-0.4l3.8,1.3l4.2-1.3l6.7-1.3l2.9-2.1l3.3,0.8l5.9,0.4l3.3,2.1l5.4-1.3l2.9,1.7l3.8-0.8l4.2,1.3l3.3-1.7l2.9-0.8l5.4,1.7l4.6-0.8L252.1,53.9z"
  },
  {
    id: "cantabria",
    name: "Cantabria",
    d: "M308.5,58.5l-2.1,2.1l-2.9-0.8l-2.1,2.5l-3.8-0.4l-2.9,2.1l-2.1-0.8l-1.3,2.5l-3.8,0.8l-1.7-2.5l-3.8-1.3l-1.3,2.1l-0.8,4.2l-3.3,1.7l-3.3-1.3l-3.8,0.8l-2.5-2.5l2.9-3.3l0.4-3.3l4.6,0.4l2.5-3.3l3.3-1.3l2.5,1.3l5-1.7l2.1,1.3l2.9-2.1l2.5,0.8l3.3-0.8l2.9,0.8l3.8-1.7l2.5,0.8L308.5,58.5z"
  },
  {
    id: "pais-vasco",
    name: "País Vasco",
    d: "M353.6,63.9l-2.5,3.3l-5.4,0.4l-2.5,3.3l-2.5,0.8l-1.3-1.7l-4.6,0.4l-2.5,2.1l-0.8,3.3l-3.3-0.4l-1.7,2.1l-2.1,1.3l-2.1-1.7l-1.7,2.1l0.8,2.5l2.9,2.5l2.5,0.8l3.3-2.1l1.7,2.1l2.1,0.4l0.8-2.9l2.1,0.8l2.5-2.1l1.7,1.7l4.2-1.3l2.9,2.1l2.1-1.7l2.9,1.7l1.7-2.1l4.6,0.8l0.4-2.5l1.3-2.1l-2.1-0.8l-0.4-2.9l-2.9-1.3l-1.7-2.9l-2.9-1.3l-1.7-2.9l-2.9-1.7L353.6,63.9z"
  },
  {
    id: "navarra",
    name: "Navarra",
    d: "M379.1,72.7l-0.4,3.3l2.1,2.9l-0.4,4.2l-2.9,0.8l-0.8,2.5l-4.2,0.8l-1.7,2.9l-3.3,0.8l-1.7,2.5l-2.9-0.8l-2.5,1.7l-2.1-1.7l-2.5,2.9l0.4,3.3l2.5,1.3l1.7,2.1l3.3,0.8l2.1,1.7l0.8,2.5l1.3,2.5l1.3,2.9l1.7-1.3l2.9,1.3l1.3,1.3l3.8-0.8l0.8,2.1l4.2-1.3l0.8-2.5l3.8-1.7l3.8-1.3l0.4-2.1l2.5-0.4l2.1-3.3l2.5-1.3l-0.8-2.9l2.5-3.3l-0.4-4.6l3.3-3.8l-2.1-2.1l0.8-2.1l-0.4-2.1l-1.3-1.7l-2.5-2.5l-4.2,0.8L379.1,72.7z"
  },
  {
    id: "rioja",
    name: "La Rioja",
    d: "M337.3,103.2l-2.1-0.8l-1.7,0.8l-1.3-1.7l-1.3,0.4l-1.7-2.1l-2.9-1.7l-2.1,1.7l-1.3,0.4l-0.8,2.5l-3.3,2.5l-3.3-0.8l-0.8,1.7l-3.8,1.3l-0.8,2.5l2.1,1.3l-0.8,2.5l2.1,1.7l3.3,2.5l1.3,2.9l4.2,1.3l3.8,0.4l2.1-0.8l2.9,0.8l2.1-0.8l0.4-2.1l2.9,0.4l1.3-1.3l1.3-2.1l2.5-2.1L337.3,103.2z"
  },
  {
    id: "aragon",
    name: "Aragón",
    d: "M368.6,116.6l-2.1,0.4l-1.3,1.3l-1.3,0.4l-1.7-1.3l-2.9,0.8l-1.3-0.8l-3.3,0.8l-0.4-1.3l-1.7-1.7l-2.5-0.4l-0.8,1.7l-1.3-0.8l-1.3-1.7l0.4-4.6l-1.7-1.3l-2.5-0.8l-1.3-2.5l-1.7-1.3l-1.3-0.4l1.3-1.7l3.3,1.3l1.3-2.5l4.2-0.8l0.8-2.5l2.9-0.8l0.4-4.2l-2.1-2.9l0.4-3.3l2.5-2.9l2.1,1.7l2.5-1.7l2.9,0.8l1.7-2.5l3.3-0.8l1.7-2.9l4.2-0.8l1.3,2.5l2.1,1.3l1.7,2.5l1.7,2.1l1.3,1.7l1.7,3.8l2.1,1.3l0.4,2.5l1.3,2.1l2.9,1.7l2.1-0.4l2.5,2.1l2.1,3.3l2.1,0.8l2.1,2.5l1.7,2.5l1.7,1.3l2.9-0.4l1.3,1.3l2.1,0.8l-1.3,2.1l-2.1,0.8l-1.3,2.5l-0.4,0.8l-2.5,2.5l0.4,2.1l-1.7,2.1l-0.4,2.1l-2.5,0.4l-2.5,1.7l-2.5-0.8l-1.7,0.8L368.6,116.6z M368.6,116.6l2.1,2.1l-1.3,2.5l2.9,2.9l2.5,0.8l2.1,1.7l0.4,2.5l2.1,2.1l2.5,0.4l1.7,0.4l1.3,1.3l0.8,2.1l-0.4,2.1l1.7,2.5l-0.4,2.1l-0.4,2.1l2.5,4.6l0.4,2.5l-1.7,1.7l-0.4,2.1l-2.9,1.7l-0.4,2.5l-0.8,0.4l-2.5,2.1l-1.7,0.8l-1.3,1.3l-2.9,0.8l-0.8-1.3l-3.3,1.3l-1.7-0.4l-0.8-1.7l-2.5,0.4l-1.7-2.9l-1.7-1.7l-2.5,1.3l-1.3-1.3l-1.7,0.8l-2.1-2.1l-1.7,1.7l-2.9,2.5l0.8,2.1l3.3,1.7l1.7,3.3l0.8,2.1l3.8,2.5l0.4,3.3l2.1,1.7l0.8,2.5l2.9,1.3l1.3,2.9l1.7,1.3l4.2,2.5l0.8,0.4l2.5,1.3l-0.8,2.5l2.1,2.9l1.3,1.3l0.4,2.1l0.8,2.5l1.3,0.8l3.3,1.3l2.5,2.5l2.5,0.8l2.1,2.5l0.4,2.5l1.3,2.5l2.5,1.3l2.5,0.8l2.9-0.4l-0.8,1.7l2.1,2.1l-1.3,0.8l0.4,1.7l-2.1,1.3l1.7,2.5l1.3,0.8l1.3-1.7l2.9,0.4l-0.4,1.7l-1.7,0.8l-2.1,2.5l2.1,0.8l1.3,2.5l-2.9,2.5l0.4,2.1l-1.7,1.7l-0.8,2.1l-2.5,1.3l-2.5-0.4l-2.1,1.7l-1.7-0.4L368.6,116.6z"
  },
  {
    id: "cataluna",
    name: "Cataluña",
    d: "M422.5,130.4l1.3,1.7l2.9,0.8l0.4,2.1l-0.4,1.3l1.3,0.8l0.4,2.9l2.1,1.3l0.8,2.5l-0.8,1.3l1.3,1.7l-1.3,1.3l-0.8,2.1l-3.8-0.4l-0.4,1.7l-1.7-0.4l-1.7,1.3l0.8,1.7l-0.8,0.8l-0.4,2.5l-2.5-0.4l-0.8,1.3l-2.1,1.3l1.3,1.3l-1.7,1.7l-0.8,0.4l-0.8,1.7l1.3,0.8l-1.3,2.1l-0.4,2.1l-3.3,1.7l-2.1-0.4l-2.1,2.5l-2.9-0.4l-2.9,0.4l-1.7,0.4l-0.8-2.9l-2.1-1.3l0.8-2.5l-1.7-1.3l0.8-2.5l-2.9-1.3l0.4-2.1l-1.3-2.1l-3.8-1.3l4.2-2.1l2.5,1.3l1.3,2.1l2.9,1.3l2.1,0.4l1.7-0.8l1.7-3.3l1.7-2.1l-0.4-3.3l2.5-2.1l0.8-0.4l2.9-1.7l0.4-2.1l1.7-1.7l-0.4-2.5l-2.5-4.6l0.4-2.1l0.4-2.1l-1.7-2.5l0.4-2.1l-0.8-2.1l-1.3-1.3l-1.7-0.4l-2.5-0.4l-2.1-2.1l-0.4-2.5l-2.1-1.7l-2.5-0.8l-2.9-2.9l1.3-2.5l-2.1-2.1l2.1-2.5l2.5-0.8l1.7-2.5l0.4-2.1l1.7-2.1l0.4-2.1l2.5-0.4l1.3,2.1l2.9,0.8l1.3-1.3l3.8,1.7l0.8,2.1l-2.1,2.5l0.8,2.1l1.3,0.8l1.3-2.9l2.1,0.8l-0.8,3.3l1.7,1.7l-2.1,2.5l-2.1-1.3l-1.3-3.8l-1.7,2.5l0.8,2.5l-2.1,0.8l-2.1-0.8l-1.3,3.3l-0.8-1.3l-0.8,1.7l-1.3,1.3l0.8,1.3l2.1,0.4l1.7,1.7l0.4,2.5l2.9,1.7l1.3-1.7l1.7,1.3l2.1,0.4l1.3-0.8l0.4-1.7l2.5-0.8l1.7-1.7l1.7-0.4l0.4-1.7l1.7-0.4l1.3-2.5l-0.8-1.7l-1.7-0.4l-0.4-1.3l-1.7-0.8l0.4-1.7l-0.8-0.8l0.4-1.7l-1.3-1.7l-1.7-0.4l-1.3,1.3l-1.3-0.4l-0.8-1.3l-1.7-0.4l-0.8-1.7l-1.7,1.3l-1.3-1.7l-2.9,0.4L433.8,131.9z"
  },
  {
    id: "castilla-leon",
    name: "Castilla y León",
    d: "M163.6,128.5l-1.3-0.4l-3.3,1.3l-1.7-0.8l-2.5,0.4l-0.8,2.1l-2.1,1.3l-1.7-1.3l-2.1,1.3l-0.4,1.7l-2.1,0.4l-0.8-2.5l2.1-2.5l0.4-3.8l0.8-0.8l-1.7-2.5l1.3-2.5l2.5-1.7l0.8-1.7l2.1-0.4l1.7-1.7l2.5-1.3l2.9,1.3l2.9-2.5l2.1-0.4l0.8-1.3l2.9-1.3l0.8-2.9l1.7-2.1l2.5,0.4l0.8-1.7l1.3,1.3l2.1-0.8l2.5,1.7l1.3,2.5l0.4,0.4l0.8,2.5l0.4,2.9l2.1,1.3l1.3-0.4l0.8-1.7l2.9,0.4l1.7,2.5l-0.8,2.1l-1.7-0.8l-3.8,1.3l-1.3,2.5l-2.1-0.8l-1.3,2.5l-1.3,1.3l-3.3-2.5l-1.3,2.5l-1.7,1.3l-1.3,2.9l-2.1,2.1l-2.9-0.8l-1.7,1.3l-2.5,0.4l-2.9-1.7l0.4-2.1l-1.3-2.1l-1.7-2.5l-5.4-1.3l-0.8-3.3l2.9-1.3l2.5-2.5l3.8,1.7l1.3-0.8l2.5,1.3l-0.4-1.7l1.7-1.3l2.1-0.4l0.8-2.1l3.3,0.8l2.9-1.7l5.4-1.3l2.9-0.4l2.5,2.1l3.3,0.4l2.1,0.8l1.3,1.3l2.5,1.7l0.8,2.5l-2.1,2.5l-4.2-1.3l-1.7,1.7l1.7,2.5l1.3,1.7l-0.4,2.5l-2.9,2.9l-4.2-0.8l-2.5,0.4l-2.1,1.3l-4.2-0.4l-2.9-2.1l-2.1-0.8l-2.1,1.3l-2.5-0.8l-4.2-2.5l-2.1-0.4l-1.3-1.7l-2.1,2.1l-0.8,2.1l-2.5,1.3l-1.3,3.3l2.1,2.9l0.4,3.3l-2.1,0.4l-1.3,1.3l-1.7-0.8l-2.1,2.5l-3.3,0.4l-1.7,2.5l-2.1-1.3l-2.9,1.3l-1.7-1.3l-2.1,0.8l-2.1-2.1l-2.1,1.3l-1.7-1.3l-1.3,2.1l0.8,2.1l-1.7,2.9l-1.3-1.3l1.3-2.1l3.8,2.1l1.3-1.3l0.8-2.5l2.5,0.8l1.7-2.5l4.2-0.8l1.7-2.1l2.5,0.4l1.7-1.7l2.5,0.8l1.7-1.3l0.4,1.7l1.3,1.7l-0.8,2.9l-2.9,0.4l-2.1-0.8l-1.7,1.3l-1.3-0.8l-1.3,1.3l0.4,2.1L163.6,128.5z"
  },
  {
    id: "madrid",
    name: "Comunidad de Madrid",
    d: "M252.1,171.8l2.1-0.8l2.5,1.3l0.4,2.1l-1.7,0.8l1.3,1.3l-1.3,2.5l1.7,2.5l-1.3,0.4l0.4,1.3l-1.3,0.8l-1.3-0.8l-1.7,1.7l-2.9-0.8l-2.1-1.7l-2.5,1.3l-1.3-2.1l-0.4-2.1l-1.7-0.4l-1.3-1.3l-1.3-0.8l0.8-2.5l-0.8-2.1l0.8-2.1l2.9,0.8l1.3-1.3l-0.8-2.1l1.7-0.8l2.9,2.1l2.9,0.4l1.3-0.8L252.1,171.8z"
  },
  {
    id: "castilla-la-mancha",
    name: "Castilla-La Mancha",
    d: "M268.4,178.6l-0.4,2.1l1.7,1.3l-0.4,2.1l1.7,0.8l2.5,2.9l0.8,3.3l2.5,1.7l4.2-0.8l1.3,1.3l4.2-0.8l1.7,3.8l2.5,2.1l1.3,1.3l1.3,1.7l-0.4,3.8l2.1,4.2l-1.7,3.3l2.1,3.8l2.9,1.7l2.1-1.7l2.9,0.4l1.3-1.3l2.5,0.8l1.3-1.3l1.3,1.7l1.7,0.4l2.1,1.3l2.9-17.1l-2.1-2.9l-3.3-1.3l-0.8-3.8l2.1-0.8l2.5-0.8l-0.8-2.5l-1.3,1.3l-3.8-2.5l2.1,0.8l1.3,2.5l2.5,0.8l1.7-0.4l1.3,1.3l2.1-0.8l0.4,4.2l2.1,1.3l2.9-0.4l1.3,1.3l2.1,0.8l4.2-1.3l1.3,0.8l2.9-0.4l1.3-1.3l1.3-0.4l2.5,2.5l0.8,0.4l0.8-2.9l2.9-0.8l0.8-3.3l-4.2-2.5l-2.1-0.8l-2.9,2.1l-2.1-0.8l-2.5,1.7l-2.1-1.3l-1.3,2.5l2.9,1.7l-1.3,3.8l1.3,2.5l-2.5,2.1l-2.5-0.8l-0.8-3.8l-2.1,2.9l0.4,2.9l-2.5,0.4l-2.5-0.8l-1.3,2.5l-1.3,1.3l-3.3-2.1l-2.1,1.7l-0.4,2.1l1.3,1.3l-0.4,2.1l1.7,0.8l2.5,2.9l0.8,3.3l2.5,2.1l4.2-0.8l1.3,1.3l4.2-0.8l1.7,3.8l2.5,2.1l1.3,1.3l1.3,1.7l-0.4,3.8l2.1,4.2l-1.7,3.3l2.1,3.8l2.9,1.7l2.1-1.7l2.9,0.4l1.3-1.3l2.5,0.8l1.3-1.3l1.3,1.7l-0.4,3.3l2.5,4.2l-2.1,3.8l2.1,3.3l2.9,1.7l2.1-1.7l2.9,0.4l1.3-1.3l1.7,2.5l2.1-0.4l1.7,0.8l-2.9,17.1l-2.1,1.3l-1.7-0.4l-1.3-1.7l-1.3,1.3l-2.5-0.8l-1.3,1.3l-2.9-0.4l-2.1,1.7l-2.9-1.7l-2.1-3.8l2.1-3.3l-2.1-4.2l0.4-3.8l-1.3-1.7l-1.3-1.3l-2.5-2.1l-1.7-3.8l-4.2,0.8l-1.3-1.3l-4.2,0.8l-2.5-1.7l-0.8-3.3l-2.5-2.9l-1.7-0.8l0.4-2.1l-1.3-1.3l0.4-2.1l2.1-1.7l3.3,2.1l1.3-1.3l1.3-2.5l2.5,0.8l2.5-0.4l-0.4-2.9l2.1-2.9l0.8,3.8l2.5,0.8l2.5-2.1l-1.3-2.5l1.3-3.8l-2.9-1.7l1.3-2.5l2.1,1.3l2.5-1.7l2.1,0.8l2.9-2.1l2.1,0.8l4.2,2.5l-0.8,3.3l-2.9,0.8l-0.8,2.9l-0.8-0.4l-2.5-2.5l-1.3,0.4l-1.3,1.3l-2.9,0.4l-1.3-0.8l-4.2,1.3l-2.1-0.8l-1.3-1.3l-2.9,0.4l-2.1,1.3l-0.4-4.2l-2.1-0.8l-1.3,1.3l-1.7,0.4l-2.5-0.8l-1.3-2.5l-2.1-0.8l3.8,2.5l1.3-1.3l0.8,2.5l-2.5,0.8l-2.1,0.8l0.8,3.8l3.3,1.3l2.1,2.9L285.4,182.5z M252.1,171.8l-1.3,0.8l-2.9-0.4l-2.9-2.1l-1.7,0.8l0.8,2.1l-1.3,1.3l-2.9-0.8l-0.8,2.1l0.8,2.5l-1.3,0.8l1.3,1.3l1.7,0.4l0.4,2.1l1.3,2.1l2.5-1.3l2.1,1.7l2.9,0.8l1.7-1.7l1.3,0.8l1.3-0.8l-0.4-1.3l1.3-0.4l-1.7-2.5l1.3-2.5l-1.3-1.3l1.7-0.8l-0.4-2.1l-2.5-1.3L252.1,171.8z"
  },
  {
    id: "comunidad-valenciana",
    name: "Comunidad Valenciana",
    d: "M290.7,199.3l-3.3-2.1l-0.8,0.8l-1.3-3.3l-2.1-0.4l0.4-2.9l-1.3-0.8l-2.1-4.2l1.3-2.1l-2.1-2.5l-1.3,1.3l-4.2-3.8l-2.1-0.8l-0.8-3.3l-2.9-1.3l-0.4-2.9l-2.1-1.7l0.4-2.9l-3.8-1.7l-0.8-2.5l-2.1-3.3l-3.8-1.3l4.2-2.5l2.5,0.8l0.8,2.5l2.5,0.8l2.1-0.4l1.3,1.3l2.5-0.8l0.4,4.2l2.1,1.7l2.9-0.4l1.3,1.7l2.1,1.3l4.6-1.3l1.3,0.8l2.9-0.4l1.3-1.3l1.3-0.4l2.5,2.5l0.8,0.4l0.8-2.9l2.9-0.8l1.3-3.8l-4.6-2.5l-2.1-0.8l-2.9,2.1l-2.1-0.8l-2.9,1.3l-1.3-2.5l2.9-2.5l-1.3-3.8l0.8-2.5l-2.5-2.1l-2.5-0.8l-0.8-3.8l-2.1,2.9l0.4,2.9l-2.5,0.4l-2.5-0.8l-1.3,2.5l-1.3,1.3l-3.8-2.1l-2.1,1.7l-0.4,2.1l1.3,1.3l-0.4,2.1l1.7,0.8l2.5,2.9l0.8,3.3l2.5,2.1l4.2-0.8l1.3,1.3l4.2-0.8l1.7,3.8l2.5,2.1l1.3,1.3l1.3,1.7l-0.4,3.8l2.1,4.2l-1.7,3.3l2.1,3.8l2.9,1.7l2.1-1.7l2.9,0.4l1.3-1.3l1.7,2.5l2.1-0.4l1.7,0.8L290.7,199.3z"
  },
  {
    id: "murcia",
    name: "Región de Murcia",
    d: "M281.3,234.6l-1.7,2.1l-1.7-2.5l-1.3-0.4l0.4-2.5l-2.1-1.3l-0.8-2.9l-1.3-1.3l0.4-3.3l1.3-1.7l1.7-0.8l0.8-2.1l3.3-1.7l1.3-1.3l1.7,0.8l1.3-0.8l2.1,2.5l-0.4,2.1l-2.9,0.8l-0.4,2.1l0.8,2.9l-1.3,1.7l-2.1,0.4l-0.4,1.7L281.3,234.6z"
  },
  {
    id: "extremadura",
    name: "Extremadura",
    d: "M164.8,206.2l-2.5,1.7l-0.8-2.5l-2.9-0.4l-0.8-2.1l-0.8,0.8l-3.8-1.7l-1.3,3.3l-3.8-0.8l-0.4-3.3l-2.5-1.7l-2.5,0.4l-2.9-1.3l-2.1,2.1l-1.3-0.8l-1.3-2.5l-2.1,0.4l-2.1-2.5l0.4-1.7l-1.3-2.5l0.4-2.5l-2.1-0.8l-2.1,1.3l-1.7-2.9l0.8-4.2l4.2-2.1l2.5-0.4l2.5-2.9l0.4-4.2l0.8-1.3l2.5,0.8l2.1,3.3l2.9,0.4l2.1-0.8l3.8,1.7l2.1-0.4l1.3,2.1l2.5-0.8l0.4,3.3l3.3,1.7l3.8-1.3l2.1,0.8l1.3,4.2l0.4,2.5l2.9,0.4l1.7,2.1l-0.4,2.9l1.7,2.1l-1.3,2.1l0.4,2.1l1.7,0.4l2.1-1.7l2.1-0.4l0.8,2.5l-1.7,3.3l1.7,2.1l-0.4,3.8l-1.7,0.8l0.8,2.5l-0.4,2.5l-2.9,0.8l0.4,2.9l2.9,1.3l-0.4,2.5l-2.5,1.3l-1.3-0.8l-0.8,2.9l0.8,2.5l-2.1,0.8l-2.1-2.1l-1.3,1.3l0.8,2.5L164.8,206.2z"
  },
  {
    id: "andalucia",
    name: "Andalucía",
    d: "M206.5,282.9l-0.4-1.3l2.5-0.8l1.3-2.5l-0.8-2.1l0.8-1.7l0.4-3.8l1.3-1.3l0.8,2.9l2.1,1.3l-0.4,2.5l0.8,0.4l1.7,2.5l1.3-2.1l4.2,0.8l0.4-2.1l2.1-0.4l1.3-2.1l-0.8-2.9l0.4-2.1l2.5-0.8l0.4-2.1l-2.1-2.5l-1.3,0.8l-1.7-0.8l-1.3,1.3l-3.3,1.7l-0.8,2.1l-1.7,0.8l-1.3,2.1l-0.4,3.3l1.3,0.8l0.8,2.5l2.1,1.3l-0.4,2.5l0.8,0.4l1.7,2.5l1.3-2.1l4.2,0.8l0.4-2.1l2.1-0.4l1.3-2.1l-0.8-2.9l0.4-2.1l2.5-0.8l0.4-2.1l-2.1-2.5l-1.3,0.8l-1.7-0.8l-1.3,1.3l-3.3,1.7l-0.8,2.1l-1.7,0.8l-1.3,2.1l-0.4,3.3l1.3,0.8l0.8,2.5l2.1,1.3l-0.4,2.5l0.8,0.4l1.7,2.5l1.3-2.1l4.2,0.8l0.4-2.1l2.1-0.4l1.3-2.1l-0.8-2.9l0.4-2.1l2.5-0.8l0.4-2.1l-2.1-2.5l-1.3,0.8l-1.7-0.8l-1.3,1.3l-3.3,1.7l-0.8,2.1l-1.7,0.8l-1.3,2.1l-0.4,3.3l1.3,0.8l0.8,2.5l2.1,1.3l-0.4,2.5l0.8,0.4l1.7,2.5l1.3-2.1l4.2,0.8l0.4-2.1l2.1-0.4l1.3-2.1l-0.8-2.9l0.4-2.1l2.5-0.8l0.4-2.1l-2.1-2.5l-1.3,0.8l-1.7-0.8l-1.3,1.3l-3.3,1.7l-0.8,2.1l-1.7,0.8l-1.3,2.1l-0.4,3.3l1.3,0.8l0.8,2.5l2.1,1.3l-0.4,2.5l0.8,0.4l1.7,2.5l1.3-2.1l4.2,0.8l0.4-2.1l2.1-0.4l1.3-2.1l-0.8-2.9l0.4-2.1l2.5-0.8l0.4-2.1l-2.1-2.5l-1.3,0.8l-1.7-0.8l-1.3,1.3l-3.3,1.7l-0.8,2.1l-1.7,0.8l-1.3,2.1l-0.4,3.3l1.3,0.8l0.8,2.5l2.1,1.3l-0.4,2.5l0.8,0.4l1.7,2.5l1.3-2.1l4.2,0.8l0.4-2.1l2.1-0.4l1.3-2.1l-0.8-2.9l0.4-2.1l2.5-0.8l0.4-2.1l-2.1-2.5l-1.3,0.8l-1.7-0.8l-1.3,1.3l-3.3,1.7l-0.8,2.1l-1.7,0.8l-1.3,2.1L206.5,282.9z"
  },
  {
    id: "baleares",
    name: "Islas Baleares",
    d: "M368.6,183.2l3.8,1.7l3.8-1.3l1.3,3.8l-1.3,3.8l-3.8-1.3l-1.7-3.8z M384.1,171.5l7.5,3.8l-1.3,5.9l-5.9-1.3z"
  },
  {
    id: "ceuta",
    name: "Ceuta",
    d: "M218,298 A2,2 0 1,1 222,298 A2,2 0 1,1 218,298 Z"
  },
  {
    id: "melilla",
    name: "Melilla",
    d: "M260,295 A2,2 0 1,1 264,295 A2,2 0 1,1 260,295 Z"
  }
];

const CANARY_REGIONS = [
  { id: "canarias", name: "La Palma", d: "M25,35 L32,33 L34,38 L28,41 L25,38 Z" },
  { id: "canarias", name: "Tenerife", d: "M40,30 L55,27 L58,34 L48,40 L40,36 Z" },
  { id: "canarias", name: "Gran Canaria", d: "M65,33 L75,31 L77,38 L68,41 Z" },
  { id: "canarias", name: "Fuerteventura", d: "M83,31 L90,29 L92,36 L85,38 Z" },
  { id: "canarias", name: "Lanzarote", d: "M95,23 L105,20 L108,30 L98,33 Z" },
  { id: "canarias", name: "Gomera", d: "M15,33 L20,31 L20,36 L16,36 Z" },
  { id: "canarias", name: "Hierro", d: "M5,40 L12,38 L12,43 L6,43 Z" }
];

export default function SpainInteractiveMap() {
  const router = useRouter();
  const [hoveredRegion, setHoveredRegion] = useState<string | null>(null);

  const handleRegionClick = (slug: string) => {
    router.push(`/dentistas/${slug}`, {scroll: false});
  };

  return (
    <div className="w-full h-full flex flex-col items-center justify-center bg-white select-none">
      
      <div className="relative w-full max-w-5xl aspect-[1.3] p-2">
        
        <svg 
            viewBox="0 0 450 350" 
            className="w-full h-full drop-shadow-lg"
            style={{ overflow: 'visible' }} 
        >
            <g id="mainland">
                {MAINLAND_REGIONS.map((region) => (
                    <motion.path
                        key={region.id}
                        d={region.d}
                        fill={hoveredRegion === region.id ? '#849700' : '#E5E7EB'} 
                        stroke="#FFFFFF"
                        strokeWidth="0.8"
                        strokeLinejoin="round"
                        className="cursor-pointer transition-colors duration-200 outline-none"
                        onMouseEnter={() => setHoveredRegion(region.id)}
                        onMouseLeave={() => setHoveredRegion(null)}
                        onClick={() => handleRegionClick(region.id)}
                        whileHover={{ 
                            scale: 1.01, 
                            zIndex: 10, 
                            filter: "drop-shadow(0px 2px 4px rgba(0,0,0,0.2))"
                        }}
                    />
                ))}
            </g>

            <g id="canaries-box" transform="translate(10, 260)"> 
                <rect 
                    x="-5" y="-10" width="120" height="50" 
                    fill="none" 
                    stroke="#CBD5E1" 
                    strokeWidth="0.5" 
                    strokeDasharray="3 3" 
                    opacity="0.6"
                />
                <text x="5" y="-3" className="text-[6px] fill-gray-400 font-fsme uppercase tracking-wider" style={{fontSize: '6px'}}>Canarias</text>

                <g
                    className="cursor-pointer"
                    onMouseEnter={() => setHoveredRegion('canarias')}
                    onMouseLeave={() => setHoveredRegion(null)}
                    onClick={() => handleRegionClick('canarias')}
                >
                    {CANARY_REGIONS.map((island, index) => (
                        <motion.path
                            key={`island-${index}`}
                            d={island.d}
                            fill={hoveredRegion === 'canarias' ? '#849700' : '#E5E7EB'}
                            stroke="#FFFFFF"
                            strokeWidth="0.5"
                            whileHover={{ scale: 1.05 }}
                        />
                    ))}
                </g>
            </g>

            {hoveredRegion && (
                <g style={{ pointerEvents: 'none' }}>
                    <text 
                        x="225" y="20" 
                        textAnchor="middle" 
                        className="fill-dkv-green-dark font-lemon text-xl uppercase tracking-widest font-bold"
                        style={{ filter: "drop-shadow(0px 2px 0px white)" }}
                    >
                        {MAINLAND_REGIONS.concat(CANARY_REGIONS).find(r => r.id === hoveredRegion)?.name}
                    </text>
                </g>
            )}
        </svg>

        {!hoveredRegion && (
            <div className="absolute bottom-4 right-4 flex items-center gap-2 text-dkv-gray/60 animate-pulse">
                <span className="text-xs font-fsme italic">Selecciona tu comunidad</span>
            </div>
        )}

      </div>
    </div>
  );
}